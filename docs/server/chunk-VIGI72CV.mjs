import './polyfills.server.mjs';
import{a as g}from"./chunk-IN36XTTK.mjs";import{l as C,m as A}from"./chunk-JG7FRMNO.mjs";import{J as z,M as O,n as j}from"./chunk-MREIMAJP.mjs";import{Cb as R,Hb as l,Ib as v,Pb as i,Qa as P,Qb as x,Rb as m,Ua as c,X as s,bc as T,cb as u,da as _,dc as B,ea as h,hb as E,pa as y,pb as f,qa as S,tb as w,ub as D,vb as k,wb as I,xb as r,yb as n,zb as d}from"./chunk-CQFKIR7E.mjs";import"./chunk-S6KH3LOX.mjs";var b=class a{cartService=s(C);product=S.required();sendResEvent=y();deleteCartItem(e){this.cartService.removeSpecificCartItem(e).subscribe({next:o=>{console.log(o),this.sendResEvent.emit(o)},error:o=>{console.log(o)}})}updateCount(e,o){this.cartService.updateCountOfProductCart(e,o).subscribe({next:t=>{console.log(t),this.sendResEvent.emit(t)},error:t=>{console.log(t)}})}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=u({type:a,selectors:[["app-cart-product"]],inputs:{product:[1,"product"]},outputs:{sendResEvent:"sendResEvent"},decls:23,vars:6,consts:[[1,"bg-fuchsia-400/0","border-b","mb-2","pb-2","justify-between","gap-4","items-center","flex","border-b-slate-800/50"],[1,"basis-2/12"],[1,"w-full",3,"src","alt"],[1,"basis-10/12","flex","justify-between","items-center"],[1,"text-main-color","font-semibold","capitalize"],[1,"font-bold","text-xl"],[1,"text-slate-700","font-normal"],[1,"text-main-color","font-bold"],["type","button",1,"py-2","px-3","my-3","text-rose-600","border","border-rose-600","rounded-md","capitalize","hover:bg-rose-600","hover:text-white","transition-colors","duration-300",3,"click"],[1,"fas","fa-solid","fa-trash-can"],[1,"flex","justify-between","items-center"],[1,"btn-main-outline","!px-4","w-fit","flex","justify-center",3,"click"],[1,"font-bold","mx-3"],[1,"btn-rose-outline","!px-4","w-fit","flex","justify-center",3,"click"]],template:function(o,t){o&1&&(r(0,"div",0)(1,"div",1),d(2,"img",2),n(),r(3,"div",3)(4,"div")(5,"p",4),i(6),n(),r(7,"h3",5),i(8),n(),r(9,"p",6),i(10," Price: "),r(11,"span",7),i(12),n()(),r(13,"button",8),l("click",function(){return t.deleteCartItem(t.product().product.id)}),d(14,"i",9),i(15," Remove "),n()(),r(16,"div",10)(17,"span",11),l("click",function(){return t.updateCount(t.product().product.id,t.product().count+1)}),i(18," + "),n(),r(19,"span",12),i(20),n(),r(21,"span",13),l("click",function(){return t.updateCount(t.product().product.id,t.product().count-1)}),i(22," - "),n()()()()),o&2&&(c(2),f("src",t.product().product.imageCover,P)("alt",t.product().product.title),c(4),m(" ",t.product().product.category.name," "),c(2),m(" ",t.product().product.title," "),c(4),x(t.product().price),c(8),x(t.product().count))},encapsulation:2})};function V(a,e){if(a&1){let o=R();r(0,"app-cart-product",17),l("sendResEvent",function(p){_(o);let Y=v(2);return h(Y.updateCartData(p))}),n()}if(a&2){let o=e.$implicit;f("product",o)}}function L(a,e){if(a&1&&k(0,V,1,1,"app-cart-product",16,D),a&2){let o=v();I(o.cartProducts)}}function q(a,e){a&1&&(r(0,"p",14),i(1," you don't have any product in cart! "),d(2,"br"),i(3," get my product "),n())}function G(a,e){a&1&&(r(0,"p",15),i(1,"loading..."),n())}var N=class a{cartService=s(C);router=s(O);activatedRoute=s(z);toastrService=s(A);cartData={};cartProducts=[];ngOnInit(){this.getCartData()}goCheckOut(e){this.cartData.totalCartPrice>0?this.router.navigate(["/checkout",e],{relativeTo:this.activatedRoute}):this.toastrService.error("You Don't Have Product's in your Cart")}getCartData(){this.cartService.getLoggedCart().subscribe({next:e=>{console.log(e),this.cartData=e.data,this.cartProducts=this.cartData.products,console.log(this.cartData)}})}updateCartData(e){this.cartData=e.data,this.cartProducts=this.cartData.products}callDeleteProduct(){this.cartService.clearAllCart().subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)}}),this.getCartData()}deleteAllProducts(){let e=g.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});e.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(o=>{o.isConfirmed?(e.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),this.callDeleteProduct()):o.dismiss===g.DismissReason.cancel&&e.fire({title:"Cancelled",text:"Your imaginary file is safe :)",icon:"error"})})}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=u({type:a,selectors:[["app-cart"]],decls:29,vars:6,consts:[[1,"font-bold","mb-14","text-gray-800","capitalize","text-3xl","text-center"],[1,"fas","fa-solid","fa-cart-arrow-down"],[1,"flex","justify-between","items-center"],[1,"basis-5/12"],["src","./images/freshcart-logo.svg","alt","cart image",1,"w-[150%]"],[1,"bg-slate-200/20","basis-5/12","border","border-solid","border-main-color","rounded","p-5"],[1,"font-bold","capitalize","text-2xl","text-center","mb-5"],[1,"text-slate-500","font-semibold"],[1,"text-main-color","font-normal"],[1,"text-slate-500","font-semibold","mb-3"],["type","button",1,"py-2","w-11/12","my-3","text-main-color","block","mx-auto","border","border-main-color","rounded-md","capitalize","hover:bg-main-color","hover:text-white","font-semibold","transition-colors","duration-200",3,"click"],["type","button",1,"py-2","w-11/12","my-3","text-rose-600","block","mx-auto","border","border-rose-600","rounded-md","capitalize",3,"click"],[1,"mt-5","w-11/12","mx-auto","bg-slate-200/20","p-4","rounded-md","shadow-lg","shadow-main-color","border"],[1,"text-2xl","text-main-color","uppercase","font-bold","mb-5","pb-1","border-b","w-fit","drop-shadow-sm"],[1,"text-xl","text-center"],[1,"text-xl","text-main-color"],[3,"product"],[3,"sendResEvent","product"]],template:function(o,t){o&1&&(r(0,"section")(1,"p",0),i(2," welcome mena erian "),d(3,"i",1),n(),r(4,"div",2)(5,"div",3),d(6,"img",4),n(),r(7,"div",5)(8,"h3",6),i(9,"orders"),n(),r(10,"p",7),i(11," Products: "),r(12,"span",8),i(13),n()(),r(14,"p",9),i(15," Total Price: "),r(16,"span",8),i(17),T(18,"currency"),n()(),r(19,"button",10),l("click",function(){return t.goCheckOut(t.cartData._id)}),i(20," check out "),n(),r(21,"button",11),l("click",function(){return t.deleteAllProducts()}),i(22," clear all products "),n()()(),r(23,"div",12)(24,"p",13),i(25," all procuts: "),n(),E(26,L,2,0)(27,q,4,0,"p",14)(28,G,2,0,"p",15),n()()),o&2&&(c(13),m("",t.cartProducts.length," items"),c(4),m("",B(18,3,t.cartData.totalCartPrice," ")," EGP"),c(9),w(t.cartProducts.length?26:t.cartData.totalCartPrice===0?27:28))},dependencies:[b,j],encapsulation:2})};export{N as CartComponent};
