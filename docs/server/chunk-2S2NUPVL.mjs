import './polyfills.server.mjs';
import{a as T}from"./chunk-37TAVD7X.mjs";import{a as V,b as _,c as L,d as G,e as M,f as H,h as I,i as N,j as q,k as R,m as D}from"./chunk-ZKBHIU2R.mjs";import{M as k}from"./chunk-MREIMAJP.mjs";import{Cb as S,Hb as w,Ib as m,Pb as a,Qb as b,Rb as E,Ua as l,Vb as y,Wb as F,X as x,Xb as P,cb as h,da as C,ea as v,fa as p,ga as g,hb as c,pb as f,tb as d,xb as i,yb as n,zb as s}from"./chunk-CQFKIR7E.mjs";import"./chunk-S6KH3LOX.mjs";function A(t,o){t&1&&(i(0,"span",15),a(1,"Email is Required!"),n())}function Z(t,o){t&1&&(i(0,"span",15),a(1,"Email not Valid!"),n())}function $(t,o){if(t&1&&(i(0,"div",7),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div"),c(6,A,2,0,"span",15)(7,Z,2,0,"span",15),n()()),t&2){let e,r=m(2);l(6),d((e=r.getEmailForm.get("email"))!=null&&e.getError("required")?6:(e=r.getEmailForm.get("email"))!=null&&e.getError("email")?7:-1)}}function j(t,o){if(t&1&&(i(0,"div",9),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div")(6,"span",15),a(7),n()()()),t&2){let e=m(2);l(7),E("",e.msgError,"!")}}function z(t,o){if(t&1&&(i(0,"div",10),p(),i(1,"svg",12),s(2,"path",13),n(),g(),s(3,"span",14),i(4,"div")(5,"span",15),a(6),n()()()),t&2){let e=m(2);l(6),b(e.msgSuccess)}}function U(t,o){t&1&&(i(0,"span"),s(1,"i",16),n())}function W(t,o){if(t&1){let e=S();i(0,"form",3),w("ngSubmit",function(){C(e);let u=m();return v(u.subumitGetEmailForm())}),i(1,"div",4)(2,"label",5),a(3,"Email:"),n(),s(4,"input",6),c(5,$,8,1,"div",7),i(6,"div",8),c(7,j,8,1,"div",9)(8,z,7,1,"div",10),i(9,"button",11),a(10," send code "),c(11,U,2,0,"span"),n()()()()}if(t&2){let e,r=m();f("formGroup",r.getEmailForm),l(5),d((e=r.getEmailForm.get("email"))!=null&&e.errors&&((e=r.getEmailForm.get("email"))!=null&&e.touched)?5:-1),l(2),d(r.msgError?7:-1),l(),d(r.msgSuccess?8:-1),l(),f("disabled",r.getEmailForm.invalid),l(2),d(r.isLoading?11:-1)}}function J(t,o){t&1&&(i(0,"span",15),a(1,"Code is Required!"),n())}function K(t,o){t&1&&(i(0,"span",15),a(1,"Code not Valid!"),n())}function O(t,o){if(t&1&&(i(0,"div",7),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div"),c(6,J,2,0,"span",15)(7,K,2,0,"span",15),n()()),t&2){let e,r=m(2);l(6),d((e=r.verifyCode.get("resetCode"))!=null&&e.getError("required")?6:(e=r.verifyCode.get("resetCode"))!=null&&e.getError("pattern")?7:-1)}}function Q(t,o){if(t&1&&(i(0,"div",9),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div")(6,"span",15),a(7),n()()()),t&2){let e=m(2);l(7),E("",e.msgError,"!")}}function X(t,o){if(t&1&&(i(0,"div",10),p(),i(1,"svg",12),s(2,"path",13),n(),g(),s(3,"span",14),i(4,"div")(5,"span",15),a(6),n()()()),t&2){let e=m(2);l(6),b(e.msgSuccess)}}function Y(t,o){t&1&&(i(0,"span"),s(1,"i",16),n())}function ee(t,o){if(t&1){let e=S();i(0,"form",3),w("ngSubmit",function(){C(e);let u=m();return v(u.submitVerifyCode())}),i(1,"div",4)(2,"label",17),a(3,"Reset Code:"),n(),s(4,"input",18),c(5,O,8,1,"div",7),i(6,"div",8),c(7,Q,8,1,"div",9)(8,X,7,1,"div",10),i(9,"button",11),a(10," send code "),c(11,Y,2,0,"span"),n()()()()}if(t&2){let e,r=m();f("formGroup",r.verifyCode),l(5),d((e=r.verifyCode.get("resetCode"))!=null&&e.errors&&((e=r.verifyCode.get("resetCode"))!=null&&e.touched)?5:-1),l(2),d(r.msgError?7:-1),l(),d(r.msgSuccess?8:-1),l(),f("disabled",r.verifyCode.invalid),l(2),d(r.isLoading?11:-1)}}function te(t,o){t&1&&(i(0,"span",15),a(1,"Email is Required!"),n())}function ie(t,o){t&1&&(i(0,"span",15),a(1,"Email not Valid!"),n())}function ne(t,o){if(t&1&&(i(0,"div",7),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div"),c(6,te,2,0,"span",15)(7,ie,2,0,"span",15),n()()),t&2){let e,r=m(2);l(6),d((e=r.resetPassword.get("email"))!=null&&e.getError("required")?6:(e=r.resetPassword.get("email"))!=null&&e.getError("email")?7:-1)}}function oe(t,o){t&1&&(i(0,"span",15),a(1,"password is Required!"),n())}function re(t,o){t&1&&(i(0,"span",15),a(1,"password should to be more than 7 characters!"),n())}function ae(t,o){if(t&1&&(i(0,"div",7),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div"),c(6,oe,2,0,"span",15)(7,re,2,0,"span",15),n()()),t&2){m();let e=P(9);l(6),d(e!=null&&e.getError("required")?6:e!=null&&e.getError("pattern")?7:-1)}}function le(t,o){if(t&1&&(i(0,"div",9),p(),i(1,"svg",12),s(2,"path",13),n(),g(),i(3,"span",14),a(4,"Info"),n(),i(5,"div")(6,"span",15),a(7),n()()()),t&2){let e=m(2);l(7),E("",e.msgError,"!")}}function se(t,o){if(t&1&&(i(0,"div",10),p(),i(1,"svg",12),s(2,"path",13),n(),g(),s(3,"span",14),i(4,"div")(5,"span",15),a(6),n()()()),t&2){let e=m(2);l(6),b(e.msgSuccess)}}function de(t,o){t&1&&(i(0,"span"),s(1,"i",16),n())}function me(t,o){if(t&1){let e=S();i(0,"form",3),w("ngSubmit",function(){C(e);let u=m();return v(u.submitSetNewPassword())}),i(1,"div",4)(2,"label",5),a(3,"Email:"),n(),s(4,"input",19),c(5,ne,8,1,"div",7),n(),i(6,"div",4)(7,"label",20),a(8,"New Password:"),n(),y(9),s(10,"input",21),c(11,ae,8,1,"div",7),n(),i(12,"div",8),c(13,le,8,1,"div",9)(14,se,7,1,"div",10),i(15,"button",11),a(16," reset password "),c(17,de,2,0,"span"),n()()()}if(t&2){let e,r=m();f("formGroup",r.resetPassword),l(5),d((e=r.resetPassword.get("email"))!=null&&e.errors&&((e=r.resetPassword.get("email"))!=null&&e.touched)?5:-1),l(4);let u=F(r.resetPassword.get("newPassword"));l(2),d(u!=null&&u.errors&&(u!=null&&u.touched)?11:-1),l(2),d(r.msgError?13:-1),l(),d(r.msgSuccess?14:-1),l(),f("disabled",r.resetPassword.invalid),l(2),d(r.isLoading?17:-1)}}var B=class t{formBuilder=x(R);authService=x(T);router=x(k);step=1;isLoading=!1;msgError="";msgSuccess="";getEmailForm=new M({email:new H(null,[_.required,_.email])});subumitGetEmailForm(){let o="";this.getEmailForm.valid&&(o=this.getEmailForm.get("email")?.value,this.resetPassword.get("email")?.patchValue(o),this.isLoading=!0,this.authService.setEmailVerfiy(this.getEmailForm.value).subscribe({next:e=>{this.isLoading=!1,console.log(e),this.msgError="",this.msgSuccess=e.message,setTimeout(()=>{e.statusMsg==="success"&&(this.step=2,this.msgSuccess="")},1e3)},error:e=>{this.isLoading=!1,console.log(e),this.msgError=e.error.message}}))}verifyCode=this.formBuilder.group({resetCode:[null,[_.required,_.pattern(/^[/w0-9]{3,}$/)]]});submitVerifyCode(){this.verifyCode.valid&&(this.isLoading=!0,this.authService.setCodeVerfiy(this.verifyCode.value).subscribe({next:o=>{this.isLoading=!1,this.msgError="",console.log(o),this.msgSuccess=o.status,setTimeout(()=>{o.status==="Success"&&(this.step=3,this.msgSuccess="")},2e3)},error:o=>{this.isLoading=!1,console.log(o),this.msgError=o.error.message}}))}resetPassword=this.formBuilder.group({email:[null,[_.required,_.email]],newPassword:[null,[_.required,_.pattern(/^[\w\.\*\+\?\^\$\(\)\[\]\{\}\|\!\@\#\%\&\~\W*]{7,}$/)]]});submitSetNewPassword(){this.resetPassword.valid&&(this.isLoading=!0,this.authService.setResetPassword(this.resetPassword.value).subscribe({next:o=>{this.isLoading=!1,this.msgError="",console.log(o),this.msgSuccess=o.message,localStorage.setItem("token",o.token),console.log(localStorage),this.authService.saveUserData(),setTimeout(()=>{this.router.navigate(["/home"]),this.msgSuccess=""},1e3)},error:o=>{this.isLoading=!1,console.log(o),this.msgError=o.error.message}}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-forget-password"]],decls:6,vars:1,consts:[[1,"w-11/12","mx-auto"],[1,"text-xl","font-bold","mb-5","text-main-color"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","mail",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","id","mail",1,"bg-gray-50","border","border-gray-300","text-gray-900","drop-shadow-md","text-sm","rounded-lg","focus:ring-main-color","focus:border-main-color","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-main-color","dark:focus:border-main-color"],["role","alert",1,"flex","items-center","p-4","my-3","text-sm","text-red-800","border","border-red-300","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400","dark:border-red-800"],[1,"flex","justify-between","items-center","content-center"],["role","alert",1,"flex","items-center","p-2","text-sm","text-red-800","border","border-red-300","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400","dark:border-red-800"],["role","alert",1,"flex","items-center","p-2","text-sm","text-green-800","border","border-green-300","rounded-lg","bg-green-50","dark:bg-gray-800","dark:text-green-400","dark:border-green-800"],["type","submit",1,"btn-main","capitalize","mt-5","block","ms-auto","px-2","focus:ring-main-color","focus:outline-main-color",3,"disabled"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"font-medium","block"],[1,"fas","fa-spin","fa-spinner"],["for","resetCode",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","resetCode","type","text","id","resetCode",1,"bg-gray-50","border","border-gray-300","text-gray-900","drop-shadow-md","text-sm","rounded-lg","focus:ring-main-color","focus:border-main-color","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-main-color","dark:focus:border-main-color"],["formControlName","email","type","email","readonly","","id","mail",1,"bg-gray-50","border","border-gray-300","text-gray-900","drop-shadow-md","text-sm","rounded-lg","focus:ring-main-color","focus:border-main-color","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-main-color","dark:focus:border-main-color"],["for","pass",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","newPassword","type","password","id","pass",1,"bg-gray-50","border","border-gray-300","text-gray-900","drop-shadow-md","text-sm","rounded-lg","focus:ring-main-color","focus:border-main-color","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-main-color","dark:focus:border-main-color"]],template:function(e,r){e&1&&(i(0,"section",0)(1,"h4",1),a(2,"Forget Password"),n(),c(3,W,12,6,"form",2)(4,ee,12,6,"form",2)(5,me,18,8,"form",2),n()),e&2&&(l(3),d(r.step===1?3:r.step===2?4:r.step===3?5:-1))},dependencies:[D,I,V,L,G,N,q],encapsulation:2})};export{B as ForgetPasswordComponent};
