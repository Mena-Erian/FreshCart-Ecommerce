import './polyfills.server.mjs';
import{a as X,c as nt,d as ot}from"./chunk-ASRACZQX.mjs";import{l as Y,m as Z}from"./chunk-JG7FRMNO.mjs";import{N as Q,k as G,l as J,m as H,n as K,r as h}from"./chunk-MREIMAJP.mjs";import{Cb as $,Hb as N,Ib as _,Pb as l,Qa as A,Qb as I,R as E,Rb as x,Ua as o,W as D,X as g,Zb as U,_a as y,bc as p,cb as z,cc as v,da as F,dc as W,ea as R,fb as M,g as B,hb as b,pb as u,qa as V,tb as w,wa as C,xb as r,yb as a,zb as f}from"./chunk-CQFKIR7E.mjs";import{f as O}from"./chunk-S6KH3LOX.mjs";var et=O(nt()),it=O(ot());var S=class e{transform(i){return i&&i<50?`onle ${i} left`:null}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=M({name:"stockStatus",type:e,pure:!0})};var P=class e{widthSubject=new B(0);width$=this.widthSubject.asObservable();constructor(i){h(i)&&(this.widthSubject.next(window.innerWidth),new ResizeObserver(()=>{this.widthSubject.next(window.innerWidth)}).observe(document.body))}static \u0275fac=function(t){return new(t||e)(D(C))};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})};var at=e=>["/details",e];function lt(e,i){e&1&&(r(0,"span"),f(1,"i",14),a())}function ct(e,i){e&1&&l(0," Add To Cart ")}function pt(e,i){if(e&1&&f(0,"fa-icon",15),e&2){let t=_(3);u("icon",t.faPlus)}}function dt(e,i){if(e&1&&b(0,ct,1,0)(1,pt,1,1,"fa-icon",15),e&2){let t=_(2);w(t.width<640?0:1)}}function st(e,i){if(e&1){let t=$();r(0,"div",0)(1,"div",1)(2,"div",2),f(3,"img",3),a(),r(4,"div",4)(5,"h4",5),l(6),p(7,"uppercase"),a(),r(8,"div",6)(9,"h3"),l(10),p(11,"titlecase"),a(),r(12,"div")(13,"p",7),l(14),p(15,"date"),a(),r(16,"p",8),l(17),p(18,"stockStatus"),a()()(),r(19,"div",9)(20,"span"),l(21),p(22,"currency"),a(),r(23,"div",10),f(24,"fa-icon",11),r(25,"span",12),l(26),a()()()()(),r(27,"button",13),N("click",function(){let s;F(t);let c=_();return R(c.addToCart((s=c.product())==null?null:s.id))}),b(28,lt,2,0,"span")(29,dt,2,1),a()()}if(e&2){let t,d,s,c,m,j,T,k,L,n=_();o(),u("routerLink",U(22,at,(t=n.product())==null?null:t._id)),o(2),u("src",(d=n.product())==null?null:d.imageCover,A)("alt",(s=n.product())==null?null:s.title),o(3),x(" ",v(7,11,(c=n.product())==null||c.category==null?null:c.category.name)," "),o(4),x(" ",v(11,13,(m=n.product())==null||m.title==null||(m=m.title.split(" ",2))==null?null:m.join(" "))," "),o(4),x(" ",v(15,15,(j=n.product())==null?null:j.createdAt)," "),o(3),x(" ",v(18,17,(T=n.product())==null?null:T.quantity)," "),o(4),I(W(22,19,(k=n.product())==null?null:k.price,"GBP")),o(3),u("icon",n.faStar),o(2),I((L=n.product())==null?null:L.ratingsAverage),o(2),w(n.isLoading?28:29)}}var tt=class e{constructor(i,t){this.viwportService=i;this.ID=t}cartService=g(Y);toastrService=g(Z);devRes={};product=V();faStar=et.faStar;faPlus=it.faPlus;width=0;isLoading=!1;ngOnInit(){h(this.ID)&&this.viwportService.width$.subscribe(i=>this.width=i)}addToCart(i){i&&(this.isLoading=!0,this.cartService.addProductToCart(i).subscribe({next:t=>{this.isLoading=!1,this.devRes=t,console.log(t,"   add"),t.status==="success"&&this.toastrService.success(t.message,t.status)},error:t=>{this.isLoading=!1,console.log(t)}}))}static \u0275fac=function(t){return new(t||e)(y(P),y(C))};static \u0275cmp=z({type:e,selectors:[["app-card-product"]],inputs:{product:[1,"product"]},decls:1,vars:1,consts:[[1,"card","border","border-green-400/50","rounded-md","overflow-hidden","shadow","relative"],[1,"cursor-pointer",3,"routerLink"],[1,"card-img"],[1,"w-full","h-[250px]","object-contain",3,"src","alt"],[1,"card-body","px-2","py-4"],[1,"text-green-500","text-xs"],[1,"font-medium","mb-2","mt-1","flex","justify-between","items-center"],[1,"text-[0.65rem]","text-end","text-gray-600"],[1,"text-[0.65rem]","text-end","text-red-500"],[1,"flex","justify-between","items-centers"],[1,"flex","items-center"],[1,"text-yellow-300",3,"icon"],[1,"text-gray-500"],[1,"bg-main-color","hover:bg-main-color/80","transition-all","absolute","bottom-1","left-[50%]","-translate-x-1/2","px-6","mx-auto","text-white","py-2","sm:px-4","border","rounded-md",3,"click"],[1,"fas","fa-spin","fa-spinner"],[1,"text-white","ms-1",3,"icon"]],template:function(t,d){t&1&&b(0,st,30,24,"div",0),t&2&&w(d.product()!=null?0:-1)},dependencies:[X,Q,J,K,G,H,S],encapsulation:2})};export{tt as a};
