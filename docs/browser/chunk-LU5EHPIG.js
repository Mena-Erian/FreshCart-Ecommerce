import{A as u,p}from"./chunk-NV6MERPE.js";import{R as s,W as l,X as c}from"./chunk-PF3VOX7V.js";var o=class extends Error{};o.prototype.name="InvalidTokenError";function h(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let a=r.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}function m(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return h(t)}catch{return atob(t)}}function f(e,t){if(typeof e!="string")throw new o("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,a=e.split(".")[r];if(typeof a!="string")throw new o(`Invalid token specified: missing part #${r+1}`);let n;try{n=m(a)}catch(i){throw new o(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(n)}catch(i){throw new o(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}var d=class e{constructor(t){this.httpClient=t}router=c(u);userData=null;defaultEmail="";setDefaultEmail(t){return t&&(this.defaultEmail=t),console.log(this.defaultEmail),this.defaultEmail}signIn(t){return this.httpClient.post("https://ecommerce.routemisr.com/api/v1/auth/signup",t)}logIn(t){return this.httpClient.post("https://ecommerce.routemisr.com/api/v1/auth/signin",t)}saveUserData(){localStorage.getItem("token")&&(this.userData=f(localStorage.getItem("token"))),console.log(this.userData)}logout(){localStorage.removeItem("token"),this.userData=null,this.router.navigate(["/login"])}setEmailVerfiy(t){return this.httpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",t)}setCodeVerfiy(t){return this.httpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",t)}setResetPassword(t){return this.httpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",t)}static \u0275fac=function(r){return new(r||e)(l(p))};static \u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})};export{d as a};
